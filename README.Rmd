---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)
```

# monads <img src="man/figures/logo.png" align="right" height="139" alt="" />

<!-- badges: start -->
<!-- badges: end -->

The goal of monads is to provide a 'toy' implementation of some common monads.

See this blog post for some additional background.

## Installation

You can install the development version of monads like so:

``` r
# install.packages("remotes")
remotes::install_github("jonocarroll/monads")
```

## Example

With the addition of a new 'flatMap' pipe `%>>=%` a monad instance can be 
passed to regular functions, unpacked, applied, and re-packaged. One example 
is to create a 'logger' which records the function applications at each step.

```{r example}
library(monads)
library(dplyr, warn.conflicts = FALSE)

result <- loggerM(mtcars) %>>=%
  filter(mpg > 10) %>>=%
  select(mpg, cyl, disp) %>>=%
  arrange(desc(mpg)) %>>=%
  head()

value(result)

logger_log(result)
```

This package also defines `Maybe`, `Result`, `Timer`, and `List` monads which 
all work with this new pipe. Additional monads can be added by third-parties to
further extend the capabilities.

See the vignette for more details.

## Prior Art

- [{monads}](https://github.com/hadley/monads) - a sketched-out implementation 
that relies on dispatch for `flatMap` operations.
- [{rmonad}](https://github.com/arendsee/rmonad) - archived on CRAN, but offers 
a sophisticated 'funnel' mechanism and various ways to capture steps of a pipeline.
- [{maybe}](https://armcn.github.io/maybe/) - a more detailed implementation of 
`Maybe`.
- [{chronicler}](https://b-rodrigues.github.io/chronicler/) - a way to 
post-process the result at each step and capture information, such as the 
runtime (see `Timer`) or dimensions. Requires an explicit `bind()` at each step.
[Associated blog post](https://www.brodrigues.co/blog/2022-04-11-monads/).
